FROM debian:latest

MAINTAINER "Dongliang Mu" <mudongliangabcd@gmail.com>

RUN apt-get -y update && apt-get -y upgrade; \
    apt-get install -y build-essential wget; \
    cd /root/; \
    wget https://raw.githubusercontent.com/mudongliang/source-packages/master/CVE-2004-2167/latex2rtf-1.9.15.tar.gz; \
    wget https://raw.githubusercontent.com/mudongliang/LinuxFlaw/master/CVE-2004-2167/latex2rtf.c; \
    tar -xvf latex2rtf-1.9.15.tar.gz; cd latex2rtf-1.9.15/; make; make install; \
    cd ..; gcc -o exploit latex2rtf.c; ./exploit > poc.tex; \
    rm -rf /var/lib/apt/lists/*;

CMD /root/latex2rtf-1.9.15/latex2rtf /root/poc.tex
